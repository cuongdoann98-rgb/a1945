<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TikTok Coin Recharge</title>
  <meta name="theme-color" content="#ffffff">
  <link rel="manifest" href="manifest.json">
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js");
    }
  </script>

  <style>
    html,body { height:100%; margin:0; padding:0; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif; background:#f7f7f7; display:flex; justify-content:center; }
    .phone { width:100%; max-width:420px; background:#fff; min-height:100vh; box-sizing:border-box; }

    header.ios-header { position:fixed; top:0; left:50%; transform:translateX(-50%); width:100%; max-width:420px; display:flex; align-items:center; justify-content:center; background:#fff; padding:12px 0; font-weight:600; font-size:17px; border-bottom:1px solid #eee; height:52px; z-index:1000; box-sizing:border-box; }
    .ios-header .back-btn { position:absolute; left:16px; top:50%; transform:translateY(-50%); font-size:22px; color:#000; cursor:pointer; }
    .ios-title { text-align:center; font-size:18px; font-weight:600; }

    .main-content { margin-top:70px; }
    .container { margin:0 auto; padding:20px 16px 180px; box-sizing:border-box; max-width:420px; width:100%; display:flex; flex-direction:column; gap:20px; }

    .balance-box { display:flex; align-items:center; background:#f9f9f9; border:1.5px solid #d0d0d0; border-radius:12px; padding:12px 15px; gap:12px; }
    .tiktok-logo { width:40px; height:40px; }
    .balance-info { display:flex; flex-direction:column; gap:4px; }
    .recharge-text { font-size:18px; font-weight:700; color:#000; }
    .balance-line { display:flex; align-items:center; gap:8px; }
    .coin-icon { width:18px; height:18px; }
    #balanceAmount { font-size:13px; color:#666; border:none; background:transparent; }

    .recharge-section { background:#fff; border-radius:12px; padding:15px; box-shadow:0 0 8px rgba(0,0,0,0.05); }
    .recharge-section h3 { margin:0; font-size:23px; font-weight:700; }
    .tiktok-input-wrapper { display:flex; align-items:center; border:1.5px solid #d0d0d0; border-radius:10px; padding:0 10px; background:#f9f9f9; }
    .tiktok-input-wrapper input { border:none; outline:none; flex:1; font-size:14px; padding:10px 0; background:transparent; }

    .coins-grid { display:grid; grid-template-columns:repeat(2,1fr); gap:15px; margin-top:5px; }
    .coin-option { background:#e3e3e3; border:1.5px solid #d0d0d0; border-radius:10px; padding:15px 10px; text-align:center; cursor:pointer; transition:0.18s; }
    .coin-option.selected { border-color:#fe2c55; background:#fff2f5; }
    .coin-value { font-weight:600; font-size:18px; display:flex; align-items:center; justify-content:center; gap:6px; }
    .coin-value img { width:18px; height:18px; }
    .coin-price { font-size:13px; color:#777; }

    .payment-footer { position:fixed; bottom:0; left:50%; transform:translateX(-50%); width:100%; max-width:420px; background:#fff; border-top:1px solid #eee; box-shadow:0 -3px 10px rgba(0,0,0,0.05); padding:10px 16px 20px; display:flex; flex-direction:column; align-items:center; gap:10px; z-index:1100; border-radius:16px 16px 0 0; }
    .payment-logos { display:flex; flex-wrap:wrap; gap:6px; align-self:flex-start; }
    .pay-icon { height:10px; width:auto; object-fit:contain; }
    .total-line { display:flex; justify-content:space-between; width:100%; font-size:15px; color:#333; }
    .done-btn { width:100%; background:#fe2c55; color:#fff; border:none; border-radius:8px; padding:13px; font-size:16px; cursor:pointer; }

    /* === Custom Popup Sheet === */
    .sheet-backdrop { position:fixed; inset:0; background:rgba(0,0,0,0.4); opacity:0; visibility:hidden; transition:all .25s ease; z-index:1500; }
    .sheet-backdrop.active { opacity:1; visibility:visible; }
    .sheet { position:fixed; left:0; right:0; bottom:-100%; background:#fff; border-top-left-radius:20px; border-top-right-radius:20px; box-shadow:0 -5px 20px rgba(0,0,0,0.2); transition:bottom .3s ease; z-index:1600; max-width:420px; margin:auto; }
    .sheet.active { bottom:0; }

    .sheet-header { padding:16px 20px; text-align:center; font-size:18px; font-weight:700; border-bottom:1px solid #eee; position:relative; }
    .sheet-header button { position:absolute; right:20px; top:12px; border:none; background:none; font-size:22px; cursor:pointer; }

    .sheet-body { padding:20px; display:flex; flex-direction:column; gap:15px; }
    .sheet-body h4 { margin:0; font-size:15px; color:#555; }
    .coin-input-row { display:flex; align-items:center; justify-content:center; gap:8px; }
    .coin-input-row img { width:20px; height:20px; }
    .coin-input-row input { border:1.5px solid #ccc; border-radius:10px; padding:10px; font-size:16px; width:120px; text-align:center; outline:none; }
    .sheet .done-btn { margin-top:10px; }

    @media (max-width:380px) {
      .ios-title { font-size:15px; }
    }
  </style>
</head>
<body>
  <div class="phone">

    <header class="ios-header">
      <span class="back-btn">&lt;</span>
      <div class="ios-title">Get Coins to send Gifts to TikTok</div>
    </header>

    <div class="main-content">
      <main class="container">
        <div class="balance-box">
          <img src="tiktok.png" class="tiktok-logo">
          <div class="balance-info">
            <span class="recharge-text">Recharge</span>
            <div class="balance-line"><img src="coin.png" class="coin-icon"><input type="text" id="balanceAmount" value="2,506,051"></div>
          </div>
        </div>

        <section class="recharge-section">
          <h3>Get Coins</h3>
          <div class="tiktok-input-wrapper">
            <span class="at-symbol">@</span>
            <input type="text" id="tiktokId" placeholder="username">
          </div>

          <div class="coins-grid">
            <div class="coin-option" data-coins="70" data-price="1.00"><div class="coin-value"><img src="coin.png">70</div><div class="coin-price">$1.00</div></div>
            <div class="coin-option" data-coins="350" data-price="5.00"><div class="coin-value"><img src="coin.png">350</div><div class="coin-price">$5.00</div></div>
            <div class="coin-option" data-coins="700" data-price="9.00"><div class="coin-value"><img src="coin.png">700</div><div class="coin-price">$9.00</div></div>
            <div class="coin-option" data-coins="1700" data-price="19.00"><div class="coin-value"><img src="coin.png">1,700</div><div class="coin-price">$19.00</div></div>
            <div class="coin-option" data-coins="3000" data-price="29.00"><div class="coin-value"><img src="coin.png">3,000</div><div class="coin-price">$29.00</div></div>
            <div class="coin-option" data-coins="7000" data-price="69.00"><div class="coin-value"><img src="coin.png">7,000</div><div class="coin-price">$69.00</div></div>
            <div class="coin-option" data-coins="17500" data-price="199.00"><div class="coin-value"><img src="coin.png">17,500</div><div class="coin-price">$199.00</div></div>
            <div class="coin-option" id="customOption"><div class="coin-value"><img src="coin.png">Custom</div></div>
          </div>
        </section>
      </main>

      <div class="payment-footer">
        <div class="payment-logos">
          <img src="visa.png" class="pay-icon"><img src="mastercard.png" class="pay-icon"><img src="paypal.png" class="pay-icon"><img src="applepay.png" class="pay-icon"><img src="googlepay.png" class="pay-icon"><img src="zalopay.png" class="pay-icon"><img src="momo.png" class="pay-icon"><img src="vnpay.png" class="pay-icon">
        </div>
        <div class="total-line"><span>Total:</span><span id="totalAmount">$0.00</span></div>
        <button class="done-btn">Recharge</button>
      </div>
    </div>

    <!-- === Custom Popup Sheet === -->
    <div class="sheet-backdrop" id="sheetBackdrop"></div>
    <div class="sheet" id="customSheet">
      <div class="sheet-header">
        Custom
        <button id="closeSheet">&times;</button>
      </div>
      <div class="sheet-body">
        <h4>Number of Coins</h4>
        <div class="coin-input-row">
          <img src="coin.png">
          <input type="number" id="customCoinInput" placeholder="Enter coins">
        </div>
        <button class="done-btn" id="confirmCustom">Recharge</button>
      </div>
    </div>

  </div>

  <script>
    const PRICE_PER_COIN = 1.0 / 70;
    const coinOptions = document.querySelectorAll('.coin-option');
    const customOption = document.getElementById('customOption');
    const totalAmountEl = document.getElementById('totalAmount');
    const sheet = document.getElementById('customSheet');
    const sheetBackdrop = document.getElementById('sheetBackdrop');
    const closeSheet = document.getElementById('closeSheet');
    const confirmCustom = document.getElementById('confirmCustom');
    const customInput = document.getElementById('customCoinInput');
    let selectedCoins = 0, selectedPrice = 0;

    const openSheet = () => { sheet.classList.add('active'); sheetBackdrop.classList.add('active'); };
    const closePopup = () => { sheet.classList.remove('active'); sheetBackdrop.classList.remove('active'); };

    coinOptions.forEach(option=>{
      option.addEventListener('click',()=>{
        coinOptions.forEach(o=>o.classList.remove('selected'));
        option.classList.add('selected');
        if(option.id==='customOption') openSheet();
        else {
          selectedCoins=parseInt(option.dataset.coins);
          selectedPrice=parseFloat(option.dataset.price);
          totalAmountEl.textContent='$'+selectedPrice.toFixed(2);
        }
      });
    });

    confirmCustom.addEventListener('click',()=>{
      const val=parseInt(customInput.value);
      if(val && val>0){
        selectedCoins=val;
        selectedPrice=val*PRICE_PER_COIN;
        totalAmountEl.textContent='$'+selectedPrice.toFixed(2);
        closePopup();
      }
    });

    closeSheet.addEventListener('click',closePopup);
    sheetBackdrop.addEventListener('click',closePopup);
  </script>
</body>
</html>